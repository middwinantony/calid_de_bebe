<h1 class="page-title">All Baby Clothing</h1>

<% if user_signed_in? && current_user.role == "seller" %>
  <div class="new-product-btn">
    <%= link_to "➕ Add New Product", new_product_path, class: "btn btn-primary" %>
  </div>
<% end %>

<div class="products-container">
  <% @products.each do |product| %>
    <div class="product-card">
      <% if user_signed_in? && current_user.role == "seller" && current_user == product.user %>
        <%= link_to "🗑️", product_path(product),
              method: :delete,
              data: { confirm: "Are you sure you want to delete this product?" },
              class: "delete-icon" %>
      <% end %>

      <% if product.images.attached? %>
        <%= image_tag url_for(product.images.first) %>
      <% else %>
        <%= image_tag "https://via.placeholder.com/220x220?text=No+Image" %>
      <% end %>

      <div class="product-details">
        <h3><%= link_to product.title, product_path(product) %></h3>
        <p><strong>Price:</strong> $<%= product.price %></p>
        <p><strong>Condition:</strong> <%= product.condition %></p>
        <% if product.category %>
          <p><strong>Category:</strong> <%= product.category.name %></p>
        <% end %>

        <% if user_signed_in? && current_user.role == "buyer" %>
          <%= button_to "🛒 Add to Cart", product_order_items_path(product), method: :post, class: "add-button" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
